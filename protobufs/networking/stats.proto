syntax = "proto3";
package eternity.networking;

message MetricStats {
  double average = 1;
  double p90 = 2;
  double p100 = 3;
  double p00 = 4;
  double p10 = 5;
}

message MetricHistory {
  repeated MetricStats windows = 1;
  repeated double window_ends = 2; // Unix timestamp in seconds (double)
}

message ServerStats {
  map<string, MetricHistory> metrics = 1;
}

message StatsRequest {
  string token = 1;
  int32 total_duration_s = 2;
  int32 window_size_s = 3;
}

message StatsResponse {
  ServerStats stats = 1;
}